&spi0 {
    status = "okay";
    compatible = "nordic,nrf-spim";
    pinctrl-0 = <&spi0_default>;
    pinctrl-1 = <&spi0_sleep>;
    pinctrl-names = "default", "sleep";
    cs-gpios = <&gpio0 9 GPIO_ACTIVE_LOW>;

    trackball: trackball@0 {
        status = "okay";
        compatible = "pixart,pmw3610";
        reg = <0>;
        spi-max-frequency = <2000000>;
        irq-gpios = <&gpio0 2 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>;

        /* ここはもう使われない
         * automouse-layer = <6>;
         * scroll-layers  = <5>;
         */

        /* ──★新方式★───────────────────────
         *   layer 6 を 700 ms 間アクティブにする
         *   （第二引数はタイムアウト ms）
         *   5 ms ごとに「動いた」イベントが来るので、
         *   実際は指を離して 0.7 秒後に layer が戻る感じ
         */
        input-processors = <&zip_temp_layer 6 700>;

        /* スクロール・スナイプ用はこの下で別 listener を
         * 追加する or code-mapper を使うやり方に変わる。
         * （いまはまずマウスレイヤー復活を優先）
         */
    };
};

/ {
    /* 既存 */
    trackball_listener {
        compatible = "zmk,input-listener";
        device = <&trackball>;
        /* ↑ここはそのままで OK ／追加不要 */
    };
};
